# å¡©å°»ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ã‚·ãƒ¼ã‚«ãƒ¼ ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª

## æ¦‚è¦
React Nativeã§é–‹ç™ºã•ã‚ŒãŸã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆiOS/Androidï¼‰å¯¾å¿œã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§ã™ã€‚è™¹ã®ç›®æ’ƒæƒ…å ±ã‚’æŠ•ç¨¿ã—ã€è¿‘éš£ã®è™¹æƒ…å ±ã‚’å—ä¿¡ã§ãã¾ã™ã€‚

## æ©Ÿèƒ½

### ğŸŒˆ ä¸»è¦æ©Ÿèƒ½
- **è™¹ã®æ’®å½±ãƒ»æŠ•ç¨¿**: ã‚«ãƒ¡ãƒ©ã§è™¹ã‚’æ’®å½±ã—ã€ä½ç½®æƒ…å ±ã¨å…±ã«æŠ•ç¨¿
- **è¿‘éš£è™¹æƒ…å ±**: ç¾åœ¨åœ°å‘¨è¾ºã®è™¹ç›®æ’ƒæƒ…å ±ã‚’ãƒãƒƒãƒ—ã§è¡¨ç¤º
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥**: è¿‘ãã§è™¹ãŒç›®æ’ƒã•ã‚ŒãŸã¨ãã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- **è™¹å‡ºç¾äºˆæ¸¬**: æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹è™¹å‡ºç¾ç¢ºç‡ã®è¡¨ç¤º
- **æŠ•ç¨¿å±¥æ­´**: è‡ªåˆ†ã®æŠ•ç¨¿å±¥æ­´ã®ç¢ºèªãƒ»ç®¡ç†

### ğŸ“± ç”»é¢æ§‹æˆ
- **ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢**: ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã®èª­ã¿è¾¼ã¿ç”»é¢
- **èªè¨¼ç”»é¢**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
- **ãƒ›ãƒ¼ãƒ ç”»é¢**: æœ€æ–°ã®è™¹æƒ…å ±ã¨å¤©æ°—äºˆå ±
- **ã‚«ãƒ¡ãƒ©ç”»é¢**: è™¹ã®æ’®å½±ãƒ»æŠ•ç¨¿
- **ãƒãƒƒãƒ—ç”»é¢**: å‘¨è¾ºã®è™¹æƒ…å ±ã‚’ãƒãƒƒãƒ—è¡¨ç¤º
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨è¨­å®š
- **é€šçŸ¥ç”»é¢**: é€šçŸ¥å±¥æ­´ã®ç¢ºèª

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **React Native**: 0.72.6
- **React Navigation**: 6.x (ç”»é¢é·ç§»)
- **React Native Maps**: åœ°å›³è¡¨ç¤º
- **React Native Camera**: ã‚«ãƒ¡ãƒ©æ©Ÿèƒ½
- **Firebase SDK**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- **AsyncStorage**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ä¿å­˜
- **Axios**: HTTPé€šä¿¡

### ä¸»è¦ä¾å­˜é–¢ä¿‚
```json
{
  "react": "18.2.0",
  "react-native": "0.72.6",
  "@react-navigation/native": "^6.1.7",
  "@react-navigation/stack": "^6.3.17",
  "@react-navigation/bottom-tabs": "^6.5.8",
  "react-native-maps": "^1.7.1",
  "react-native-image-picker": "^5.6.0",
  "@react-native-firebase/app": "^18.3.0",
  "@react-native-firebase/messaging": "^18.3.0",
  "react-native-geolocation-service": "^5.3.1",
  "axios": "^1.5.0"
}
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Node.js 18+
- React Native CLI
- Android Studio (Androidé–‹ç™º)
- Xcode (iOSé–‹ç™º)

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   cd mobile
   npm install
   ```

2. **iOSè¨­å®š**
   ```bash
   cd ios
   pod install
   cd ..
   ```

3. **Androidè¨­å®š**
   Android Studioã§`android/`ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã€å¿…è¦ãªè¨­å®šã‚’è¡Œã†

4. **ç’°å¢ƒå¤‰æ•°è¨­å®š**
   ```bash
   # .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   API_BASE_URL=http://localhost:3000/api
   FIREBASE_PROJECT_ID=your-project-id
   ```

### å®Ÿè¡Œæ–¹æ³•

#### é–‹ç™ºç’°å¢ƒã§ã®å®Ÿè¡Œ
```bash
# Metro bundlerã®èµ·å‹•
npm start

# Androidå®Ÿè¡Œ
npm run android

# iOSå®Ÿè¡Œ
npm run ios
```

#### ãƒ“ãƒ«ãƒ‰
```bash
# Android APKãƒ“ãƒ«ãƒ‰
npm run build:android

# iOS buildãƒ“ãƒ«ãƒ‰
npm run build:ios
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
mobile/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ screens/            # ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ SplashScreen.js
â”‚   â”‚   â”œâ”€â”€ LoginScreen.js
â”‚   â”‚   â”œâ”€â”€ RegisterScreen.js
â”‚   â”‚   â”œâ”€â”€ HomeScreen.js
â”‚   â”‚   â”œâ”€â”€ CameraScreen.js
â”‚   â”‚   â”œâ”€â”€ MapScreen.js
â”‚   â”‚   â”œâ”€â”€ ProfileScreen.js
â”‚   â”‚   â”œâ”€â”€ NotificationScreen.js
â”‚   â”‚   â””â”€â”€ RainbowDetailScreen.js
â”‚   â”œâ”€â”€ services/           # APIãƒ»å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ ApiService.js
â”‚   â”‚   â”œâ”€â”€ AuthService.js
â”‚   â”‚   â”œâ”€â”€ LocationService.js
â”‚   â”‚   â””â”€â”€ NotificationService.js
â”‚   â”œâ”€â”€ context/            # React Context
â”‚   â”‚   â”œâ”€â”€ AuthContext.js
â”‚   â”‚   â””â”€â”€ LocationContext.js
â”‚   â”œâ”€â”€ utils/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â””â”€â”€ assets/             # ç”»åƒãƒ»é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ android/                # Androidå›ºæœ‰è¨­å®š
â”œâ”€â”€ ios/                    # iOSå›ºæœ‰è¨­å®š
â”œâ”€â”€ App.js                  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ package.json
```

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè§£èª¬

### App.js
```javascript
// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
// ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€èªè¨¼çŠ¶æ…‹ç®¡ç†ã€åˆæœŸåŒ–å‡¦ç†ã‚’è¡Œã†
import React, { useEffect, useState } from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { AuthContext } from './src/context/AuthContext';
import { LocationContext } from './src/context/LocationContext';
```

### AuthContext
```javascript
// èªè¨¼çŠ¶æ…‹ã®ç®¡ç†
// ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ç®¡ç†
export const AuthContext = createContext({
  isAuthenticated: false,
  user: null,
  login: async () => {},
  logout: async () => {},
});
```

### ApiService
```javascript
// APIé€šä¿¡ã®çµ±ä¸€ç®¡ç†
// èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®è‡ªå‹•ä»˜ä¸ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
class ApiService {
  constructor() {
    this.client = axios.create({
      baseURL: API_BASE_URL,
      timeout: 10000,
    });
  }
}
```

### LocationService
```javascript
// ä½ç½®æƒ…å ±ã®ç®¡ç†
// GPSå–å¾—ã€æ¨©é™ç®¡ç†ã€ä½ç½®æƒ…å ±ã®ç›£è¦–
export class LocationService {
  static async getCurrentLocation() {
    const hasPermission = await this.requestLocationPermission();
    // ä½ç½®æƒ…å ±å–å¾—å‡¦ç†
  }
}
```

## ç”»é¢ä»•æ§˜

### ãƒ›ãƒ¼ãƒ ç”»é¢ (HomeScreen)
```javascript
// æ©Ÿèƒ½:
// - æœ€æ–°ã®è™¹ç›®æ’ƒæƒ…å ±è¡¨ç¤º
// - ç¾åœ¨ã®å¤©æ°—æƒ…å ±è¡¨ç¤º
// - è™¹å‡ºç¾äºˆæ¸¬è¡¨ç¤º
// - å„æ©Ÿèƒ½ã¸ã®æ¡ˆå†…

const HomeScreen = ({ navigation }) => {
  const [rainbows, setRainbows] = useState([]);
  const [weatherData, setWeatherData] = useState(null);
  const [prediction, setPrediction] = useState(null);
  
  // ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
};
```

### ã‚«ãƒ¡ãƒ©ç”»é¢ (CameraScreen)
```javascript
// æ©Ÿèƒ½:
// - è™¹ã®æ’®å½±ãƒ»ç”»åƒé¸æŠ
// - ä½ç½®æƒ…å ±å–å¾—
// - èª¬æ˜æ–‡å…¥åŠ›
// - æŠ•ç¨¿å‡¦ç†

const CameraScreen = ({ navigation }) => {
  const [imageUri, setImageUri] = useState(null);
  const [description, setDescription] = useState('');
  const { location } = useLocation();
  
  // æ’®å½±ãƒ»æŠ•ç¨¿ãƒ­ã‚¸ãƒƒã‚¯
};
```

### ãƒãƒƒãƒ—ç”»é¢ (MapScreen)
```javascript
// æ©Ÿèƒ½:
// - å‘¨è¾ºã®è™¹æƒ…å ±ã‚’ãƒãƒƒãƒ—è¡¨ç¤º
// - ç¾åœ¨åœ°è¡¨ç¤º
// - è™¹ãƒãƒ¼ã‚«ãƒ¼ã®ã‚¿ãƒƒãƒ—ã§è©³ç´°è¡¨ç¤º

const MapScreen = ({ navigation }) => {
  const [rainbows, setRainbows] = useState([]);
  const [mapRegion, setMapRegion] = useState(defaultRegion);
  
  // ãƒãƒƒãƒ—è¡¨ç¤ºãƒ»æ“ä½œãƒ­ã‚¸ãƒƒã‚¯
};
```

## APIé€£æº

### èªè¨¼ãƒ•ãƒ­ãƒ¼
```javascript
// ãƒ­ã‚°ã‚¤ãƒ³
const login = async (email, password) => {
  const response = await ApiService.post('/auth/login', {
    email,
    password
  });
  
  // ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
  await Keychain.setInternetCredentials(TOKEN_KEY, 'token', token);
};
```

### è™¹æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼
```javascript
// è™¹ç›®æ’ƒæƒ…å ±ã®æŠ•ç¨¿
const createRainbow = async (rainbowData, imageUri) => {
  const formData = new FormData();
  formData.append('latitude', rainbowData.latitude);
  formData.append('longitude', rainbowData.longitude);
  formData.append('description', rainbowData.description);
  formData.append('image', {
    uri: imageUri,
    type: 'image/jpeg',
    name: 'rainbow.jpg',
  });
  
  return ApiService.uploadFile('/rainbow', formData);
};
```

## ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

### Firebaseè¨­å®š
```javascript
// é€šçŸ¥ã®åˆæœŸåŒ–
const initializeNotifications = async () => {
  await messaging().requestPermission();
  const token = await messaging().getToken();
  
  // FCMãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡
  await ApiService.registerFcmToken(token);
};
```

### é€šçŸ¥å‡¦ç†
```javascript
// ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰é€šçŸ¥
messaging().onMessage(async (remoteMessage) => {
  // ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ã‚’è¡¨ç¤º
  showLocalNotification(
    remoteMessage.notification.title,
    remoteMessage.notification.body
  );
});

// ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰é€šçŸ¥
messaging().setBackgroundMessageHandler(async (remoteMessage) => {
  console.log('Background message:', remoteMessage);
});
```

## çŠ¶æ…‹ç®¡ç†

### Context APIä½¿ç”¨ä¾‹
```javascript
// èªè¨¼çŠ¶æ…‹ã®æä¾›
const AuthProvider = ({ children }) => {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [user, setUser] = useState(null);
  
  const login = async (email, password) => {
    const result = await AuthService.login(email, password);
    if (result.success) {
      setIsAuthenticated(true);
      setUser(result.user);
    }
  };
  
  return (
    <AuthContext.Provider value={{ isAuthenticated, user, login }}>
      {children}
    </AuthContext.Provider>
  );
};
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ç”»åƒæœ€é©åŒ–
```javascript
// ç”»åƒã®åœ§ç¸®ãƒ»ãƒªã‚µã‚¤ã‚º
const optimizeImage = async (imageUri) => {
  const compressedImage = await ImageResizer.createResizedImage(
    imageUri,
    800,
    600,
    'JPEG',
    80
  );
  return compressedImage.uri;
};
```

### ãƒ¡ãƒ¢ãƒªç®¡ç†
```javascript
// ä¸è¦ãªç”»åƒã®è§£æ”¾
useEffect(() => {
  return () => {
    if (imageUri) {
      // ç”»åƒãƒªã‚½ãƒ¼ã‚¹ã®è§£æ”¾
      Image.getSize(imageUri, () => {}, () => {});
    }
  };
}, [imageUri]);
```

## ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š
```bash
# ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm test

# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
npm run test:coverage
```

### ãƒ†ã‚¹ãƒˆä¾‹
```javascript
// LoginScreen.test.js
import { render, fireEvent } from '@testing-library/react-native';
import LoginScreen from '../src/screens/LoginScreen';

describe('LoginScreen', () => {
  it('should render login form', () => {
    const { getByPlaceholderText } = render(<LoginScreen />);
    
    expect(getByPlaceholderText('Email')).toBeTruthy();
    expect(getByPlaceholderText('Password')).toBeTruthy();
  });
});
```

## ãƒ‡ãƒãƒƒã‚°

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
```bash
# Flipperä½¿ç”¨
npx react-native doctor

# ãƒ­ã‚°ç¢ºèª
npx react-native log-android
npx react-native log-ios
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```javascript
// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
const errorHandler = (error, isFatal) => {
  if (isFatal) {
    console.error('Fatal error:', error);
  } else {
    console.warn('Non-fatal error:', error);
  }
};

ErrorUtils.setGlobalHandler(errorHandler);
```

## ãƒ“ãƒ«ãƒ‰ãƒ»ãƒªãƒªãƒ¼ã‚¹

### Android APKç”Ÿæˆ
```bash
cd android
./gradlew assembleRelease
```

### iOS Archiveç”Ÿæˆ
```bash
cd ios
xcodebuild -workspace RainbowSeeker.xcworkspace \
  -scheme RainbowSeeker \
  -configuration Release \
  -destination generic/platform=iOS \
  -archivePath RainbowSeeker.xcarchive archive
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **Metro bundlerã‚¨ãƒ©ãƒ¼**
   ```bash
   npx react-native start --reset-cache
   ```

2. **Android ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼**
   ```bash
   cd android
   ./gradlew clean
   ```

3. **iOS Podã‚¨ãƒ©ãƒ¼**
   ```bash
   cd ios
   pod deintegrate
   pod install
   ```

## ä»Šå¾Œã®æ”¹å–„è¨ˆç”»

### æ©Ÿèƒ½è¿½åŠ 
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½
- [ ] è™¹ã®å“è³ªè©•ä¾¡
- [ ] ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½
- [ ] å¤šè¨€èªå¯¾å¿œ

### æŠ€è¡“çš„æ”¹å–„
- [ ] TypeScriptå°å…¥
- [ ] çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå°å…¥
- [ ] E2Eãƒ†ã‚¹ãƒˆè¿½åŠ 
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

ã“ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç°¡å˜ã«è™¹ã®ç›®æ’ƒæƒ…å ±ã‚’å…±æœ‰ã—ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§è™¹ã®å‡ºç¾ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚